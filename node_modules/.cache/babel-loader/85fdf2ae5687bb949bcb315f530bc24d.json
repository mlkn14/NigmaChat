{"ast":null,"code":"import \"antd-mobile/lib/wing-blank/style/css\";\nimport _WingBlank from \"antd-mobile/lib/wing-blank\";\nimport \"antd-mobile/lib/button/style/css\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/white-space/style/css\";\nimport _WhiteSpace from \"antd-mobile/lib/white-space\";\nimport \"antd-mobile/lib/result/style/css\";\nimport _Result from \"antd-mobile/lib/result\";\nimport \"antd-mobile/lib/modal/style/css\";\nimport _Modal from \"antd-mobile/lib/modal\";\nvar _jsxFileName = \"D:\\\\USK MI\\\\Semester 4\\\\MK\\\\Database Berbasis Web\\\\realtime-chatting-main\\\\realtime-chatting-main\\\\src\\\\containers\\\\UserCenter\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport Cookies from 'js-cookie';\nimport { reqUser } from '../../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar promise = null;\nexport default class UserCenter extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: 'username',\n      signature: 'islam itu indah',\n      avatar: 'https://gw.alipayobjects.com/zos/rmsportal/pdFARIqkrKEGVVEwotFe.svg'\n    };\n\n    this.changeInformation = () => {\n      this.props.history.push('/changeInformation');\n    };\n\n    this.logout = () => {\n      _Modal.alert('stop', 'Apakah Anda yakin ingin keluar??', [{\n        text: 'Membatalkan'\n      }, {\n        text: 'Tentu',\n        onPress: () => {\n          // 干掉cookie中userid\n          Cookies.remove('userid'); // 跳转页面\n\n          this.props.history.replace('/login');\n        }\n      }]);\n    };\n  }\n\n  componentDidMount() {\n    const userid = Cookies.get('userid');\n    promise = reqUser({\n      userid\n    });\n    promise.then(value => {\n      const response = value.data;\n\n      if (response.code === 1) {\n        this.props.history.replace('/login');\n        return;\n      } else {\n        const {\n          username,\n          signature,\n          avatar,\n          message\n        } = response.data;\n        this.setState({\n          username\n        }); // username是必然存在的\n\n        if (signature !== '') this.setState({\n          signature\n        }); // 个性签名为空用默认的\n\n        if (avatar !== '') this.setState({\n          avatar\n        }); // 头像为空用默认的\n\n        if (message !== '') this.setState({\n          message\n        }); // 头像为空用默认的\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (promise) {\n      Promise.race([promise, Promise.resolve()]);\n    }\n  } // 修改个人信息\n\n\n  render() {\n    const {\n      username,\n      signature,\n      avatar\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(_Result, {\n        title: username,\n        message: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: signature\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 51\n        }, this),\n        img: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: avatar,\n          alt: \"avatar\",\n          style: {\n            width: '60px',\n            height: '60px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(_WhiteSpace, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(_WingBlank, {\n        children: [/*#__PURE__*/_jsxDEV(_Button, {\n          type: \"primary\",\n          onClick: this.changeInformation,\n          children: \"edit profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(_Button, {\n          type: \"ghost\",\n          onClick: this.logout,\n          children: \"logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/USK MI/Semester 4/MK/Database Berbasis Web/realtime-chatting-main/realtime-chatting-main/src/containers/UserCenter/index.jsx"],"names":["React","Component","Cookies","reqUser","promise","UserCenter","state","username","signature","avatar","changeInformation","props","history","push","logout","alert","text","onPress","remove","replace","componentDidMount","userid","get","then","value","response","data","code","message","setState","componentWillUnmount","Promise","race","resolve","render","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {Button, WhiteSpace, WingBlank, Result,Modal} from 'antd-mobile'\r\nimport Cookies from 'js-cookie'\r\nimport {reqUser} from '../../api'\r\n\r\n\r\nvar promise = null\r\nexport default class UserCenter extends Component {\r\n    state = {\r\n        username: 'username',\r\n        signature: 'islam itu indah',\r\n        avatar: 'https://gw.alipayobjects.com/zos/rmsportal/pdFARIqkrKEGVVEwotFe.svg'\r\n    }\r\n\r\n    componentDidMount(){\r\n        const userid = Cookies.get('userid')\r\n        promise = reqUser({userid})\r\n        promise.then(value=>{\r\n            const response = value.data\r\n            if(response.code===1){\r\n                this.props.history.replace('/login')\r\n                return\r\n            }else{\r\n                const {username, signature, avatar, message} = response.data\r\n                this.setState({username})// username是必然存在的\r\n                if(signature!=='') this.setState({signature})// 个性签名为空用默认的\r\n                if(avatar!=='') this.setState({avatar})// 头像为空用默认的\r\n                if(message!=='') this.setState({message})// 头像为空用默认的\r\n            }\r\n        })\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        if(promise){\r\n            Promise.race([promise, Promise.resolve()])\r\n        }\r\n    }\r\n\r\n    // 修改个人信息\r\n    changeInformation = ()=>{\r\n        this.props.history.push('/changeInformation')\r\n    }\r\n\r\n    // 退出登录\r\n    logout = ()=>{\r\n        Modal.alert('stop', 'Apakah Anda yakin ingin keluar??', [\r\n            {text: 'Membatalkan'},\r\n            {\r\n              text: 'Tentu',\r\n              onPress: ()=> {\r\n                // 干掉cookie中userid\r\n                Cookies.remove('userid')\r\n                // 跳转页面\r\n                this.props.history.replace('/login')\r\n              }\r\n            }\r\n          ])\r\n    }\r\n\r\n    render() {\r\n        const {username, signature, avatar} = this.state\r\n        return (\r\n            <div >\r\n                <Result title={username} message={<span>{signature}</span>}\r\n                img={<img src={avatar} alt='avatar' style={{width:'60px', height:'60px'}} />} /> \r\n                <WhiteSpace/>\r\n                <WingBlank>\r\n                <Button type='primary' onClick={this.changeInformation}>edit profile</Button>\r\n                <Button type='ghost' onClick={this.logout}>logout</Button>\r\n                </WingBlank>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}