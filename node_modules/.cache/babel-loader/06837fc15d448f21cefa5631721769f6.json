{"ast":null,"code":"var _jsxFileName = \"D:\\\\USK MI\\\\Semester 4\\\\MK\\\\Database Berbasis Web\\\\realtime-chatting-main\\\\realtime-chatting-main\\\\src\\\\containers\\\\Main\\\\index.jsx\";\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport Header from '../../components/Header';\nimport Footer from '../../components/Footer';\nimport UserCenter from '../../containers/UserCenter';\nimport NotFound from '../../components/NotFound';\nimport React, { Component } from 'react';\nimport ChangeInformation from '../../containers/ChangeInformation';\nimport Chat from '../../containers/Chat';\nimport '../../assets/css/style.css';\nimport MessageDetail from '../../containers/MessageDetail';\nimport Cookies from 'js-cookie';\nimport { reqUser } from '../../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar promise = null;\n\nclass Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      msgid: ''\n    };\n  }\n\n  componentWillUnmount() {\n    if (promise) {\n      Promise.race([promise, Promise.resolve()]);\n    }\n  }\n\n  componentDidMount() {\n    // 读取浏览器中的cookie\n    const userid = Cookies.get('userid');\n\n    if (!userid) {\n      // 跳转到登录页面\n      this.props.history.replace('/login');\n    } else {\n      promise = reqUser({\n        userid\n      });\n      promise.then(value => {\n        const response = value.data;\n\n        if (response.code === 1) {\n          //userid非法\n          this.props.history.replace('/login'); // 跳转到登录页面\n\n          return;\n        }\n      });\n    }\n  }\n\n  render() {\n    const pathname = this.props.location.pathname; // 当前路径\n\n    let title = 'Chatroom';\n\n    if (pathname === '/') {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 14\n      }, this);\n    } else if (pathname === '/chat') {\n      title = 'Chatroom';\n    } else if (pathname === '/usercenter') {\n      title = 'usercenter';\n    } else if (pathname === '/changeInformation') {\n      title = 'changeInformation';\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        title: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/chat\",\n          component: Chat\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/message/:msgid\",\n          component: MessageDetail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/usercenter\",\n          component: UserCenter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/changeInformation\",\n          component: ChangeInformation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          component: NotFound\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["D:/USK MI/Semester 4/MK/Database Berbasis Web/realtime-chatting-main/realtime-chatting-main/src/containers/Main/index.jsx"],"names":["Redirect","Route","Switch","Header","Footer","UserCenter","NotFound","React","Component","ChangeInformation","Chat","MessageDetail","Cookies","reqUser","promise","Main","state","msgid","componentWillUnmount","Promise","race","resolve","componentDidMount","userid","get","props","history","replace","then","value","response","data","code","render","pathname","location","title"],"mappings":"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","sourcesContent":["import {Redirect, Route, Switch} from 'react-router-dom'\r\nimport Header from '../../components/Header';\r\nimport Footer from '../../components/Footer'\r\nimport UserCenter from '../../containers/UserCenter'\r\nimport NotFound from '../../components/NotFound';\r\nimport React, { Component } from 'react'\r\nimport ChangeInformation from '../../containers/ChangeInformation';\r\nimport Chat from '../../containers/Chat';\r\nimport '../../assets/css/style.css'\r\nimport MessageDetail from '../../containers/MessageDetail';\r\nimport Cookies from 'js-cookie'\r\nimport {reqUser} from '../../api'\r\n\r\n\r\nvar promise = null\r\nclass Main extends Component {\r\n  state = {\r\n    msgid: ''\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    if(promise){\r\n      Promise.race([promise, Promise.resolve()])\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    // 读取浏览器中的cookie\r\n    const userid = Cookies.get('userid')\r\n    if(!userid){// 跳转到登录页面\r\n        this.props.history.replace('/login')\r\n    }else{\r\n      promise = reqUser({userid})\r\n      promise.then(value=>{\r\n        const response = value.data\r\n        if(response.code===1){//userid非法\r\n          this.props.history.replace('/login')// 跳转到登录页面\r\n          return\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const pathname = this.props.location.pathname// 当前路径\r\n    let title = 'Chatroom'\r\n    if(pathname==='/'){\r\n      return <Redirect to='/chat'/>\r\n    }else if(pathname==='/chat'){\r\n      title = 'Chatroom'\r\n    }else if(pathname==='/usercenter'){\r\n      title = 'usercenter'\r\n    }else if(pathname==='/changeInformation'){\r\n      title = 'changeInformation'\r\n    }\r\n\r\n    return (\r\n      <div className=\"App\"> \r\n        <Header title={title} />\r\n        <Switch>\r\n          <Route path='/chat' component={Chat} />\r\n          <Route path='/message/:msgid' component={MessageDetail} />\r\n          <Route path='/usercenter' component={UserCenter} />\r\n          <Route path='/changeInformation' component={ChangeInformation} /> \r\n          <Route component={NotFound} />\r\n        </Switch>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}